## Pagination
> Pagination 이란 검색 결과를 가져올 때, 모든 결과를 가져오는 것이 아닌 번호를 매겨 일부만 가져오는 기법이다.
---
## Pagination의 구현 방법

## Offset 방식
- Offset Pagination이란, page 혹은 offset/limit을 지정하여 데이터에서 pagination 된 결과를 조회하는 방식을 의미한다.
- 클라이언트는 페이지당 요청하는 자료의 갯수(limit)와 현재 페이지의 번호를 파라미터로 요청 -> 서버에서 오프셋 값을 확인 -> 서버는 데이터베이스와 통신하여 쿼리에 limit과 offset 을 통해 자료를 요청.
  - 오프셋 = (현재 페이지 번호 -1) * 페이지 당 요청하는 자료 갯수

[파라미터 형식]
```java
/posting/?offset=10&limit=10
```
```java
/posting/?page=1
```

[쿼리 형식]
```mysql
SELECT * FROM posting LIMIT 10 OFFSET 20;
```

### Offset 방식의 장/단점
**장점** 
- 간단한 구현과 가장 대중적인 방식이다.
  - 대부분의 SQL에서 Offset 방식을 지원하고,프레임 워크에서 Offset 방식으로 Pagination 기능을 제공하는 경우가 많다.
- 전체 페이지 갯수를 알 수 있다.
- 유저가 페이지를 직접 선택하고 이동할 수 있다.

**단점**
- offset pagination은 offset 위치를 계산하고, 필요한 데이터를 찾을 때까지 테이블을 전체 스캔한다. 따라서 대용량 데이터에서 offset을 사용할 경우 쿼리 성능이 저하될 수 있다.
- 쓰기 빈도가 높은 테이블인 경우, 데이터를 조회하는 도중에 데이터가 추가될 수 있다. 즉, 페이지간의 일관성이 유지되지 않을 수 있다.

---

## Cursor 방식
- Cursor Pagination이란, 페이징된 데이터를 다음 페이지로 가져오기 위해 이전 페이지의 마지막 항목을 기반으로 쿼리를 수행하는 방식이다.
- 즉,다음 페이지네이션의 PK를 기반으로 페이지를 구하는 방식이다.

[파라미터 형식]
```java
/posting/?cursor=10&limit=10
```
[쿼리 형식]
```mysql
SELECT * FROM posting WHERE id > 10 LIMIT; 10 /*11~20*/
```

### Cursor 방식의 장/단점
**장점**
- cursor 방식은 인덱스가 적용된 값을 비교하기 때문에 offset 방식처럼 테이블 전체를 스캔하지 않는다. 따라서 데이터베이스의 부하가 적다.
- id값으로 데이터를 조회하기 때문에 쓰기 빈도가 높은 테이블이어도 조회시 값이 누락되지 않는다. 즉, 페이지간의 일관성이 유지된다.

**단점**
- offset 방식에 비해 구현이 복잡하다.
- 정렬되지 않은 데이터에는 적용할 수 없다.
