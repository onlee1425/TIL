## 리플리케이션(Replication) 이란?
- 리플리케이션이란 데이터베이스 시스템에서 데이터의 복제를 통해 데이터의 가용성과 안정성을 높이는 기술이다.
- 리플리케이션의 복제를 통해 데이터 일관성을 유지하고, 데이터의 손상 또는 서버 장애 시 시스템을 계속 유지할 수 있다.

![](https://miro.medium.com/v2/resize:fit:640/format:webp/1*chR8ylwKqxH7NufU6FrxKA.png)
- 리플리케이션 서버의 명칭은 보통 다음과 같이 구분한다.
    - 원본 서버 : Master / Primary / Leader
    - 사본 서버 : Slave / Secondary / Replica
  
## 리플리케이션의 동작
![](https://nesoy.github.io/assets/posts/20180216/2.png)

1. 마스터-슬레이브 아키텍처:
일반적으로 리플리케이션은 마스터-슬레이브 아키텍처를 사용한다. 마스터(Master) DB는 쓰기 작업(INSERT, UPDATE, DELETE)을 처리하고, 슬레이브(Slave) DB는 읽기 작업(SELECT)을 처리한다.


2. 데이터 변경 감지:
마스터 DB에서 발생하는 데이터 변경 작업은 **바이너리 로그(Binary Log)** 나 트랜잭션 로그(Transaction Log)와 같은 로그 파일에 기록된다. 이 로그 파일은 변경 사항을 기록하는 역할을 한다.
   - 바이너리 로그란? : MySQL 서버에서 Create, Alter, Drop과 같은 작업을 수행하면 MySQL은 그 변화된 이벤트를 기록하는데 이러한 변경사항들에 대한 정보를 담고 있는 이진 파일을 바이너리 로그 파일 이라고 한다.

3. 데이터 전파:
마스터 DB에서 발생한 변경 사항은 레플리케이션 프로세스에 의해 수집되어 슬레이브 데이터베이스로 전파된다.
데이터 전파는 네트워크를 통해 이루어지며, 슬레이브 DB는 변경 사항을 받아들이고 복제한다.


4. 복제 및 적용:
슬레이브 DB는 받은 변경 사항을 로컬 데이터베이스에 적용한다. 이를 통해 데이터베이스의 일관성을 유지하고 동일한 데이터를 유지한다.

![](https://velog.velcdn.com/images%2Fzpswl45%2Fpost%2F53d75593-4db1-442f-9033-9eeed22c1fc2%2F%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-12-08%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010.53.14.png)
## 리플리케이션의 장점
- SELECT 성능 향상
  - 리플리케이션을 구성하면 N개의 슬레이브를 가지기 때문에 READ에 대한 부하가 분산된다.
- 데이터 백업
  - 마스터의 내용을 복제하기 때문에 DB 오류가 발생하거나, 삭제된다고 해도 슬레이브 중 하나를 Master로 사용할 수 있기 때문에 데이터 백업 용도로 사용할 수 있다.

## 리플리케이션의 단점
- 복제지연
  - 네트워크 지연, 서버 부하, 레플리케이션 처리 시간 등에 의해 복제 지연이 발생하여 슬레이브의 데이터가 마스터의 데이터와 정확히 일치한다고 보장할 수 없다. 
  즉, 슬레이브가 마스터의 쿼리 처리량을 따라가지 못한다면 데이터 정합성이 보장되지 않는다.
- Binary Log File 관리
  - 마스터는 바이너리 로그에 대한 데이터 보관 주기를 설정하지만, 슬레이브에 관한 관리는 하지 않기 때문에 마스터에서 슬레이브에 쌓이는 바이너리 로그를 삭제하지 못한다.
- Fail Over 불가
  - 마스터에서 에러가 발생 했을 경우 슬레이브로 Failover하는 기능을 지원하지 않는다. 슬레이브 역시 마스터와 로그 위치가 다르다면 관리자가 작업을 해야 한다.


참고 : https://velog.io/@zpswl45/DB-Replication-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC
http://cloudrain21.com/mysql-replication