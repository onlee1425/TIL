> 웹 기술의 발전과 함께 웹 애플리케이션의 중요성이 커지면서 보안에 대한 고려도 더욱 중요해졌다. 그 중에서도 SQL Injection, XSS, CSRF와 같은 보안 공격은, 사용자의 정보를 유출하거나 웹 애플리케이션을 무력화시킬 정도의 위험성이 있다. 주요한 웹 애플리케이션 보안 공격인 SQL Injection, XSS, CSRF에 대해 살펴보고 안전한 웹 애플리케이션을 구축하기 위한 방법을 알아보도록 하자.

## SQL Injection (SQL 삽입 공격)
- SQL Injection은 데이터베이스에 대한 공격으로, 사용자 입력값이 충분히 검증되지 않을 때 발생할 수 있다. 악의적인 사용자가 웹 애플리케이션의 입력 필드를 통해 SQL 쿼리를 주입하여 데이터베이스를 공격하는 기술이다.

### 공격 예시
```sql
SELECT * FROM users WHERE username = '입력값' AND password = '입력값';
```
악의적인 입력: ' OR '1'='1'; --

실제 쿼리 : 
```sql
SELECT * FROM users WHERE username = '' OR '1'='1'; --' AND password = '';
```

이 경우, 공격자는 모든 사용자의 정보를 조회할 수 있게 된다.

### 예방 방법
- 매개변수화된 쿼리 사용: Prepared Statements 또는 Parameterized Queries를 사용하여 사용자 입력을 쿼리에 직접 포함하지 않고, 파라미터로 처리한다.
- 입력값 검증 및 정제: 사용자 입력을 받을 때, 입력값을 검증하고 허용되지 않은 문자나 구문을 필터링한다.
- 접근 권한 제한: 데이터베이스 계정이 최소한의 권한만을 가지도록 설정하여 공격 피해를 최소화한다.

---

## XSS (Cross-Site Scripting) 공격
- XSS는 공격자가 악의적인 스크립트를 웹 페이지에 삽입하여 사용자 브라우저에서 실행되게 하는 공격이다.

### 공격 예시
```html
<script>
  // 악의적인 스크립트
  alert("안전하지 않은 페이지에 접속하셨습니다.");
</script>
```
이 스크립트가 실행되면 예시와 같은 alert이 뜨게 된다.

### 예방 방법
- 입력값 이스케이핑: 사용자 입력값을 출력할 때 특수문자를 이스케이핑하여 브라우저에서 스크립트로 해석되지 않도록 처리한다.
- 콘텐츠 보안 정책 (CSP) 사용: CSP를 설정하여 허용된 소스에서만 스크립트를 실행하도록 제한한다.
- HTTP Only 쿠키 사용: 중요한 정보를 저장하는 쿠키에 HttpOnly 속성을 추가하여 JavaScript로의 접근을 방지한다.

---

## CSRF (Cross-Site Request Forgery) 공격
- CSRF는 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행동을 웹 애플리케이션에서 수행하게 하는 공격이다. 특히 금융 거래와 관련된 서비스에서 큰 피해가 발생한다. 

### 공격 예시
```html
<img src="https://target-app.com/transfer?amount=1000&to=attacker" alt="이미지">
```
이 경우, 공격자는 사용자의 계정에서 비정상적인 이체를 시도할 수 있다. 이를 막기 위해선 CSRF 토큰과 같은 방어 수단을 도입해야 한다.

### 예방 방법
- CSRF 토큰 사용: 모든 중요한 요청에 고유한 CSRF 토큰을 포함시켜, 공격자가 토큰을 알지 못하면 요청이 거부되도록 처리한다.
- SameSite 쿠키 속성 활용: 쿠키의 SameSite 속성을 설정하여 외부 사이트로의 요청에 대한 쿠키 전송을 방지한다.
- 리퍼러 검증: 요청을 받을 때 HTTP 리퍼러 헤더를 검증하여 해당 요청이 예상한 사이트에서 온 것인지 확인한다.

